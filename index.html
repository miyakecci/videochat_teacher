<!DOCTYPE html>
<head>
    <form>
        <input type="button" value="データの取得" onClick="getData()">
        </form>
        
    <div id="result"></div>

    <title>研究室サンプル先生側</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.webrtc.ecl.ntt.com/skyway-latest.js"></script>
    <script src="https://cdn.webrtc.ecl.ntt.com/screenshare-latest.js"></script>
    <script type="text/javascript" src="text.js"></script>
    <script src="./js/libs/jquery.facedetection.min.js"></script>
    <script type="text/javascript" src="jquery.overlay.js"></script>
    
</head>

<body>
<p>Focus the IFrame first (e.g. by clicking in it), then try pressing some keys.</p>
<p id="log"></p>
<div class="pure-g">
    <!-- Video area -->
    <div class="pure-u-2-3" id="video-container">
        <p>研究室サンプル先生側</p>
        <video id="my-video" muted="true" width="900" height="400" autoplay></video>
        <iframe src="https://wtcuac-my.sharepoint.com/personal/g1872087_w_tcu_ac_jp/_layouts/15/Doc.aspx?sourcedoc={082042d3-6f37-4631-9545-9afc2200114c}&amp;action=embedview&amp;wdAr=1.7777777777777777" width="350px" height="221px" frameborder="0">これは、<a target="_blank" href="https://office.com/webapps">Office</a> の機能を利用した、<a target="_blank" href="https://office.com">Microsoft Office</a> の埋め込み型のプレゼンテーションです。</iframe>

    </div>
    <div class="bg_hako" id="hako">

        <div id=hako1><img src="s1.png" ></div>    
        <div id=hako2><img src="s2.png" ></div>
        <div id=hako3><img src="s3.png" ></div>    
        <div id=hako4><img src="s4.png" ></div>
        <div id=hako5><img src="s5.png" ></div>    
        <div id=hako6><img src="s6.png" ></div>

    </div>

    <form action="cgi-bin/formsample.cgi" method="post">
        <p>色を指定：<input type="color" name="cl"></p>
        <script src="https://embed.small.chat/T02GULFTXE3C02H6CA38UV.js" async></script>

    <!-- Steps -->
    <div class="pure-u-1-3" id="control">

        <p><a href="#" class="pure-button pure-button-success" id="start-screen">画面共有</a></p>

        <p><a href="#" class="pure-button pure-button-success" id="start-camera">カメラ</a></p>


        <!-- Get local audio/video stream -->
        <div id="step1">
            <p>Please allow the camera and microphone to be used.</p>
            <div id="step1-error">
                <p>The camera or the microphone cannot be accessed. Please confirm that you have the correct permissions set in your browser</p>
                <a href="#" class="pure-button pure-button-error" id="step1-retry">Retry getting media</a>
            </div>
        </div>

        <!-- Make calls to others -->
        <div id="step2">
            <p>My peer id: <span id="my-id">...</span></p>
            <h3>Call</h3>
            <div class="pure-form">
                <label for="otherpeerid">My peer id:</label>
                <input id="otherpeerid">
                <a href="#" class="pure-button pure-button-success" id="make-call">Call</a>
            </div>
        </div>

        <!-- Call in progress -->
        <div id="step3">
            <p>Connected to: <span id="their-id">...</span></p>
            <p><a href="#" class="pure-button pure-button-error" id="stop-screen">End screenshare</a></p>
            <p><a href="#" class="pure-button pure-button-error" id="end-call">End call</a></p>
            
    </div>


<script type="text/javascript" src="app.js"></script>
</div>
<iframe src="https://wtcuac-my.sharepoint.com/personal/g1872087_w_tcu_ac_jp/_layouts/15/Doc.aspx?sourcedoc={082042d3-6f37-4631-9545-9afc2200114c}&amp;action=embedview&amp;wdAr=1.7777777777777777" width="350px" height="221px" frameborder="0">これは、<a target="_blank" href="https://office.com/webapps">Office</a> の機能を利用した、<a target="_blank" href="https://office.com">Microsoft Office</a> の埋め込み型のプレゼンテーションです。</iframe>
<script>
document.addEventListener('keydown', logKey);

function logKey(e) {
  log.textContent += ` ${e.code}`;
}
    

    function getData(){
        setInterval(() => {
    
  
      let request = new XMLHttpRequest();
    
      request.onreadystatechange = function(){
        if (request.readyState == 4){
          if (request.status == 200){
            let node = document.getElementById("result");
            
            node.innerHTML = request.responseText;
            if(node.innerHTML>=15){
                document.getElementById('hako2').style.backgroundColor = 'red';
            }
            else if(node.innerHTML<15 && node.innerHTML>=8){
                document.getElementById('hako2').style.backgroundColor = 'yellow';
            }
            else{
                document.getElementById('hako2').style.backgroundColor = 'blue';
            }
          }
        }
      }
    
    
      request.open('GET', 'sample.txt', true);
      request.send(null);
    }, 1000);
    }
    
    </script>
    <link rel="stylesheet" href="style.css">
</body>
</html>
